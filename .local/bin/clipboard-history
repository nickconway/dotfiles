#!/usr/bin/env bash
set -euo pipefail

if [[ -t 0 ]]; then
    SELECTED=$(cliphist list | fzft --preview="cliphist decode {}" -- -d $'\t' --with-nth 2)
    [[ -n $SELECTED ]] && echo "$SELECTED" | cliphist decode
else
    cliphist list |
        rofi -dmenu -display-columns 2 -p ÔÅø -i -config ~/.config/rofi/styles/style_2.rasi -theme-str 'listview { columns: 1; } mode-switcher { enabled: false; }' |
        cliphist decode |
        wl-copy -n &&
        paste-keys
fi
