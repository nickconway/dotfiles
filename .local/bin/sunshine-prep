#!/usr/bin/env bash
set -euo pipefail

if [[ $1 == "do" ]]; then
    if pidof hyprlock; then
        touch /tmp/.sunshine-locked
        pkill -USR1 hyprlock
    fi
    swaync-client -dn
    sunshine-headless enable
elif [[ $1 == "undo" ]]; then
    sunshine-headless disable
    swaync-client -df
    if [[ -e /tmp/.sunshine-locked ]]; then
        rm /tmp/.sunshine-locked
        hyprlock
    fi
fi
