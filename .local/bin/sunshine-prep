#!/usr/bin/env bash

if [[ $1 == "do" ]]; then
    if pidof hyprlock; then
        touch /tmp/.sunshine-locked
        pkill -USR1 hyprlock
    fi

    swaync-client -dn
    qs -c caelestia ipc call gameMode enable || true
    sunshine-headless enable
elif [[ $1 == "undo" ]]; then
    sunshine-headless disable
    swaync-client -df
    qs -c caelestia ipc call gameMode disable || true

    if [[ -e /tmp/.sunshine-locked ]]; then
        rm /tmp/.sunshine-locked
        hyprlock
    fi
fi
