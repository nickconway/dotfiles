#!/bin/bash
set -euo pipefail

SHELL_NAME="$(basename "$SHELL")"
PANE_ID="$(tmux list-panes -a -F '#{pane_id}' -f '#{==:#{pane_title},Runner}')"

if [[ -z "$PANE_ID" ]]; then
    PANE_ID="$(tmux split -d -l 25% -P -F "#{pane_id}")"
    tmux select-pane -t "$PANE_ID" -T Runner
fi

PANE_COMMAND="$(tmux list-panes -a -F '#{pane_current_command}' -f '#{==:#{pane_title},Runner}')"
[[ $PANE_COMMAND == "$SHELL_NAME" ]] && tmux send -t "$PANE_ID" clear Space '&&' Space \("$@"\) Enter
