#!/bin/bash

if command -v apt &>/dev/null; then
    sudo apt update && sudo apt upgrade -y
elif command -v pacman &>/dev/null; then
    echo ":: Checking Arch Linux PGP Keyring..."
    installedver="$(LANG= sudo pacman -Qi archlinux-keyring | grep -Po '(?<=Version         : ).*')"
    currentver="$(LANG= sudo pacman -Si archlinux-keyring | grep -Po '(?<=Version         : ).*')"
    if [ $installedver != $currentver ]; then
        echo " Arch Linux PGP Keyring is out of date."
        echo " Updating before full system upgrade."
        sudo pacman -Sy --needed --noconfirm archlinux-keyring
    else
        echo " Arch Linux PGP Keyring is up to date."
        echo " Proceeding with full system upgrade."
    fi
    if command -v yay &>/dev/null; then
        yay -Syu --noconfirm --color=always
    elif command -v trizen &>/dev/null; then
        trizen -Syu
    elif command -v pacaur &>/dev/null; then
        pacaur -Syu
    elif command -v aura &>/dev/null; then
        sudo aura -Syu
    else
        sudo pacman -Syu --noconfirm
    fi
fi
