#!/usr/bin/env bash
set -euo pipefail

if [[ -n "${DEBUG_MODE:-}" ]]; then
	set -x
fi

HIDDEN=false

while true; do
    CURSOR_POS=$(hyprctl cursorpos | tr -d ',')
    CURSOR_Y=$(echo "$CURSOR_POS" | awk '{print $2}')

    if [[ $CURSOR_Y -eq 0 ]] && [[ $HIDDEN == true ]]; then
        HIDDEN=false
        killall waybar -SIGUSR1
    elif [[ $CURSOR_Y -gt 60 ]] && [[ $HIDDEN == false ]]; then
        HIDDEN=true
        killall waybar -SIGUSR1
    fi
done
